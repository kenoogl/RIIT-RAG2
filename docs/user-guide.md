# 玄界RAGシステム ユーザーガイド

## 概要

このガイドでは、玄界RAGシステムのWebユーザーインターフェイス（WebUI）の使い方を詳しく説明します。WebUIを通じて、玄界システムに関する質問を行い、AIによる回答を得ることができます。

## 目次

1. [WebUIへのアクセス](#webuiへのアクセス)
2. [画面構成](#画面構成)
3. [基本的な使い方](#基本的な使い方)
4. [高度な機能](#高度な機能)
5. [トラブルシューティング](#トラブルシューティング)
6. [よくある質問](#よくある質問)

## WebUIへのアクセス

### 1. システムの起動確認

WebUIを使用する前に、玄界RAGシステムが起動していることを確認してください。

```bash
# システムの状態確認
curl http://localhost:8000/api/health
```

正常に動作している場合、以下のような応答が返されます：
```json
{
  "status": "healthy",
  "timestamp": "2024-01-15T10:30:00Z"
}
```

### 2. ブラウザでアクセス

Webブラウザで以下のURLにアクセスしてください：

- **ローカル環境**: http://localhost:8000
- **本番環境**: https://your-domain.com

### 3. 対応ブラウザ

以下のブラウザで動作確認済みです：

| ブラウザ | 最小バージョン | 推奨バージョン |
|----------|----------------|----------------|
| Chrome | 90+ | 最新版 |
| Firefox | 88+ | 最新版 |
| Safari | 14+ | 最新版 |
| Edge | 90+ | 最新版 |

## 画面構成

### メイン画面の構成要素

```
┌─────────────────────────────────────────┐
│ 🏠 玄界RAGシステム                        │
│ 九州大学スーパーコンピュータ玄界システム用質問応答システム │
├─────────────────────────────────────────┤
│ 📊 システム状態パネル                      │
│ ・システム状態: 正常                       │
│ ・使用モデル: llama3.2:3b                 │
│ ・アクティブセッション: 1                   │
├─────────────────────────────────────────┤
│ 🔧 モデル選択                            │
│ 使用モデル: [llama3.2:3b ▼] [切り替え]     │
├─────────────────────────────────────────┤
│ 💬 質問入力フォーム                       │
│ ┌─────────────────────────────────────┐ │
│ │ 玄界システムについて質問してください...    │ │
│ │                                   │ │
│ └─────────────────────────────────────┘ │
│ ☑ 会話履歴を含める  最大出典数: [5]        │
│ [質問する] [履歴クリア]                    │
├─────────────────────────────────────────┤
│ 📝 会話履歴                              │
│ ┌─────────────────────────────────────┐ │
│ │ 👤 ユーザー: 玄界システムとは？          │ │
│ │ 🤖 AI: 玄界システムは九州大学の...       │ │
│ │     📚 出典: [公式サイト] [マニュアル]    │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

### 1. ヘッダー部分

- **システム名**: 玄界RAGシステム
- **説明**: システムの概要説明

### 2. システム状態パネル

リアルタイムでシステムの状態を表示します：

- **システム状態**: 正常/警告/エラー
- **使用モデル**: 現在使用中のLLMモデル名
- **アクティブセッション**: 現在のアクティブなセッション数

### 3. モデル選択セクション

- **モデル選択ドロップダウン**: 利用可能なLLMモデルの一覧
- **切り替えボタン**: 選択したモデルに切り替え

### 4. 質問入力フォーム

- **質問入力エリア**: 質問を入力するテキストエリア
- **オプション設定**: 会話履歴の使用、最大出典数の設定
- **操作ボタン**: 質問送信、履歴クリア

### 5. 会話履歴エリア

- **メッセージ表示**: ユーザーの質問とAIの回答を時系列で表示
- **出典情報**: 回答の根拠となった文書の出典リンク

## 基本的な使い方

### 1. 初回アクセス時の確認

WebUIにアクセスしたら、まずシステム状態を確認してください：

1. **システム状態パネル**で「システム状態: 正常」と表示されていることを確認
2. **使用モデル**が表示されていることを確認
3. モデル選択ドロップダウンにモデル一覧が表示されることを確認

### 2. 基本的な質問の仕方

#### ステップ1: 質問の入力

1. **質問入力エリア**をクリック
2. 玄界システムに関する質問を日本語で入力
3. 例：「玄界システムの利用方法を教えてください」

#### ステップ2: オプションの設定（任意）

- **会話履歴を含める**: チェックすると過去の会話を参考にした回答が得られます
- **最大出典数**: 回答に含める出典の数を1〜20の範囲で設定

#### ステップ3: 質問の送信

以下のいずれかの方法で質問を送信：

- **「質問する」ボタン**をクリック
- **Ctrl+Enter**（Windows/Linux）または**Cmd+Enter**（Mac）を押下

#### ステップ4: 回答の確認

1. **処理中表示**: 「回答を生成中...」のローディング表示
2. **回答表示**: AIによる回答が会話履歴エリアに表示
3. **出典確認**: 回答の下に表示される出典リンクで詳細情報を確認

### 3. 質問の例

#### 基本的な質問

```
玄界システムとは何ですか？
```

#### 具体的な使用方法

```
玄界システムでジョブを投入する方法を教えてください
```

#### 技術的な詳細

```
玄界システムのハードウェア構成について詳しく教えてください
```

#### トラブルシューティング

```
玄界システムでジョブがエラーになった場合の対処法は？
```

### 4. 会話履歴の活用

#### 連続した質問

前の質問の文脈を活用した質問が可能です：

```
1回目: 玄界システムのストレージについて教えてください
2回目: そのストレージの容量はどのくらいですか？
3回目: バックアップはどのように行われていますか？
```

#### 履歴の管理

- **履歴の確認**: 会話履歴エリアで過去のやり取りを確認
- **履歴のクリア**: 「履歴クリア」ボタンで会話履歴をリセット

## 高度な機能

### 1. モデルの切り替え

#### 利用可能なモデル

システムでは複数のLLMモデルを利用できます：

| モデル名 | 特徴 | 推奨用途 |
|----------|------|----------|
| llama3.2:1b | 軽量、高速 | 簡単な質問、クイックレスポンス |
| llama3.2:3b | バランス型 | 一般的な質問応答 |
| gemma2:2b | 高精度 | 詳細な技術情報が必要な場合 |

#### モデル切り替え手順

1. **モデル選択ドロップダウン**から希望のモデルを選択
2. **「モデル切り替え」ボタン**をクリック
3. 切り替え完了まで10〜30秒待機
4. システム状態パネルで新しいモデル名を確認

### 2. 詳細設定の活用

#### 最大出典数の調整

- **少ない出典数（1-3）**: 簡潔な回答が欲しい場合
- **多い出典数（5-10）**: 詳細で包括的な回答が欲しい場合
- **最大出典数（15-20）**: 研究や詳細調査が必要な場合

#### 会話履歴の使い分け

- **履歴を含める**: 連続した質問や文脈を重視する場合
- **履歴を含めない**: 独立した質問や新しいトピックの場合

### 3. キーボードショートカット

| ショートカット | 機能 |
|----------------|------|
| Ctrl+Enter / Cmd+Enter | 質問送信 |
| Escape | エラーモーダルを閉じる |
| Tab | フォーカス移動 |

### 4. アクセシビリティ機能

- **スクリーンリーダー対応**: ARIA属性による音声読み上げ対応
- **キーボードナビゲーション**: マウスなしでの操作が可能
- **高コントラスト表示**: 視認性を向上させるデザイン

## トラブルシューティング

### よくある問題と解決方法

#### 1. 「システム状態: エラー」と表示される

**原因**: システムの一部が正常に動作していない

**解決方法**:
1. ページを再読み込み（F5またはCtrl+R）
2. システム管理者に連絡
3. ブラウザのキャッシュをクリア

#### 2. 質問を送信しても回答が返ってこない

**原因**: ネットワーク接続の問題またはシステム負荷

**解決方法**:
1. ネットワーク接続を確認
2. 30秒程度待機してから再試行
3. より軽量なモデルに切り替え
4. 質問文を短くして再試行

#### 3. モデル切り替えができない

**原因**: モデルの読み込みエラーまたはリソース不足

**解決方法**:
1. 数分待ってから再試行
2. ページを再読み込み
3. システム管理者に連絡

#### 4. 文字化けが発生する

**原因**: ブラウザの文字エンコーディング設定

**解決方法**:
1. ブラウザの文字エンコーディングをUTF-8に設定
2. ページを再読み込み
3. 別のブラウザで試行

#### 5. 回答の品質が低い

**原因**: モデルの選択や質問の仕方

**解決方法**:
1. より高性能なモデルに切り替え
2. 質問をより具体的に記述
3. 会話履歴を含めて文脈を提供
4. 最大出典数を増やす

### エラーメッセージと対処法

#### 「接続エラー」

```
対処法:
1. インターネット接続を確認
2. VPNを使用している場合は一時的に無効化
3. ファイアウォール設定を確認
```

#### 「リクエストタイムアウト」

```
対処法:
1. 質問文を短くする
2. システム負荷の低い時間帯に再試行
3. より軽量なモデルを選択
```

#### 「モデル読み込みエラー」

```
対処法:
1. 別のモデルを選択
2. システム管理者に連絡
3. システムの再起動を依頼
```

## よくある質問

### Q1: どのような質問ができますか？

**A**: 玄界システムに関するあらゆる質問が可能です：

- システムの概要や仕様
- 利用方法や操作手順
- トラブルシューティング
- 技術的な詳細
- 利用規約やポリシー

### Q2: 回答の精度はどの程度ですか？

**A**: 回答の精度は以下の要因に依存します：

- **使用モデル**: より高性能なモデルほど精度が高い
- **質問の具体性**: 具体的な質問ほど精度が高い
- **出典の豊富さ**: 関連文書が多いトピックほど精度が高い

### Q3: 個人情報は安全ですか？

**A**: はい、以下の対策により安全性を確保しています：

- **ローカル処理**: すべての処理がオンプレミス環境で実行
- **データ暗号化**: 通信データは暗号化
- **ログ管理**: アクセスログは適切に管理

### Q4: 同時に何人まで利用できますか？

**A**: システム設定により異なりますが、通常は以下の通りです：

- **同時ユーザー**: 最大10名
- **キューイング**: 超過時は待機列に追加
- **レート制限**: 1分間に60リクエストまで

### Q5: モバイルデバイスでも利用できますか？

**A**: はい、レスポンシブデザインによりモバイルデバイスでも利用可能です：

- **対応デバイス**: スマートフォン、タブレット
- **推奨画面サイズ**: 320px以上
- **タッチ操作**: 完全対応

### Q6: オフラインでも利用できますか？

**A**: いいえ、オンライン環境が必要です：

- **ネットワーク接続**: 必須
- **サーバー通信**: リアルタイムでの通信が必要
- **キャッシュ**: 一部の静的コンテンツのみキャッシュ

### Q7: 回答に間違いがあった場合はどうすればよいですか？

**A**: 以下の方法で対処してください：

1. **再質問**: より具体的に質問し直す
2. **モデル変更**: 別のモデルで試行
3. **出典確認**: 提示された出典を直接確認
4. **フィードバック**: システム管理者に報告

### Q8: 質問の履歴は保存されますか？

**A**: セッション中のみ保存されます：

- **セッション中**: ブラウザを閉じるまで保持
- **永続化**: デフォルトでは永続化されない
- **プライバシー**: 個人を特定する情報は保存されない

## 使用上の注意事項

### 1. 適切な利用

- **目的**: 玄界システムに関する情報取得のみに使用
- **禁止事項**: 不適切な質問や悪用は禁止
- **責任**: 回答内容の最終確認は利用者の責任

### 2. システムリソース

- **負荷軽減**: 不要な連続質問は避ける
- **効率的利用**: 明確で具体的な質問を心がける
- **共有利用**: 他の利用者への配慮

### 3. セキュリティ

- **機密情報**: 機密情報を質問に含めない
- **アカウント**: 共有アカウントの使用は避ける
- **ログアウト**: 使用後は適切にセッションを終了

## サポート・お問い合わせ

### 技術的な問題

- **システム管理者**: [admin@example.com]
- **技術サポート**: [support@example.com]
- **緊急時**: [emergency@example.com]

### 利用方法に関する質問

- **ユーザーサポート**: [user-support@example.com]
- **FAQ**: [https://example.com/faq]
- **マニュアル**: [https://example.com/manual]

### フィードバック・改善提案

- **フィードバック**: [feedback@example.com]
- **機能要望**: [feature-request@example.com]
- **バグ報告**: [bug-report@example.com]

---

**最終更新**: 2024年1月15日  
**ドキュメントバージョン**: 1.0.0

このユーザーガイドに関するご質問やフィードバックがございましたら、お気軽にお問い合わせください。