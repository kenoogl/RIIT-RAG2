# ç„ç•ŒRAGã‚·ã‚¹ãƒ†ãƒ  ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰

## æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€ç„ç•ŒRAGã‚·ã‚¹ãƒ†ãƒ ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚**æœ€ã‚‚ç°¡å˜ã§ç¢ºå®Ÿãªæ–¹æ³•ã¯ã€LLMã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼ˆKiro/Antigravityï¼‰ã‚’æ´»ç”¨ã—ãŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ã™ã€‚**

## ğŸš€ æ¨å¥¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ï¼ˆæœ€ã‚‚ç°¡å˜ï¼‰

### LLMã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ãŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã“ã®æ–¹æ³•ãŒ**æœ€ã‚‚ç°¡å˜ã§ç¢ºå®Ÿ**ã§ã™ã€‚LLMã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãŒã™ã¹ã¦ã®æ‰‹é †ã‚’è‡ªå‹•åŒ–ã—ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã‚‚è‡ªå‹•çš„ã«è§£æ±ºã—ã¾ã™ã€‚

#### å¯¾å¿œLLMã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ

##### ğŸ”§ ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œæ©Ÿèƒ½ä»˜ãLLMã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼ˆæ¨å¥¨ï¼‰

**VSCodeãƒ™ãƒ¼ã‚¹ã®IDEçµ±åˆå‹**
- **Kiro**: VSCodeæ‹¡å¼µã¨ã—ã¦å‹•ä½œã€ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã¨ã‚³ãƒ¼ãƒ‰å®Ÿè¡ŒãŒå¯èƒ½
- **Antigravity**: VSCodeçµ±åˆã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ç†è§£ã¨ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«å„ªã‚Œã‚‹

**Webãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œå¯¾å¿œ**
- **ChatGPT Plusï¼ˆCode Interpreterï¼‰**: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€Pythonå®Ÿè¡Œç’°å¢ƒ
- **Claude 4.5ï¼ˆArtifactsï¼‰**: ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ»å®Ÿè¡Œã€ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œå¯¾å¿œ
- **Cursor**: AIçµ±åˆã‚¨ãƒ‡ã‚£ã‚¿ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚³ãƒ¼ãƒ‰æ”¯æ´

##### ğŸ’¬ ãƒãƒ£ãƒƒãƒˆå‹LLMã‚µãƒ¼ãƒ“ã‚¹ï¼ˆæŒ‡ç¤ºã®ã¿ï¼‰

**å•†ç”¨ã‚µãƒ¼ãƒ“ã‚¹**
- **ChatGPTï¼ˆGPT-5.2ï¼‰**: OpenAI - æœ€æ–°ãƒ¢ãƒ‡ãƒ«
- **Claudeï¼ˆClaude 4.5ï¼‰**: Anthropic - æœ€æ–°ãƒ¢ãƒ‡ãƒ«
- **Geminiï¼ˆGemini 3ï¼‰**: Google - æœ€æ–°ãƒ¢ãƒ‡ãƒ«
- **Copilot**: Microsoft

**ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ»ãƒ­ãƒ¼ã‚«ãƒ«**
- **Ollama**: llama3.2, gemma2, qwen2.5ç­‰
- **LM Studio**: ãƒ­ãƒ¼ã‚«ãƒ«LLMå®Ÿè¡Œç’°å¢ƒ
- **Jan**: ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ChatGPTä»£æ›¿

#### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

##### æ–¹æ³•A: ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œæ©Ÿèƒ½ä»˜ãã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼ˆæœ€ã‚‚ç°¡å˜ï¼‰

1. **ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³**
   ```bash
   git clone https://github.com/kenoogl/RIIT-RAG2.git
   cd RIIT-RAG2
   ```

2. **LLMã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã®èµ·å‹•**
   - **Kiro/Antigravity**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§VSCodeã‚’é–‹ãã€ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚’èµ·å‹•
   - **ChatGPT Plus**: Code Interpreterã‚’æœ‰åŠ¹åŒ–
   - **Claude**: Artifactsãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨
   - **Cursor**: AIãƒãƒ£ãƒƒãƒˆã‚’é–‹å§‹

3. **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æŒ‡ç¤º**
   ```
   ç„ç•ŒRAGã‚·ã‚¹ãƒ†ãƒ ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦èµ·å‹•ã—ã¦ãã ã•ã„ã€‚
   å¿…è¦ãªä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€Ollamaã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€
   åˆæœŸè¨­å®šã€å‹•ä½œç¢ºèªã¾ã§å…¨ã¦è¡Œã£ã¦ãã ã•ã„ã€‚
   ```

4. **å®Œäº†**
   ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãŒä»¥ä¸‹ã‚’è‡ªå‹•å®Ÿè¡Œã—ã¾ã™ï¼š
   - Pythonç’°å¢ƒã®ç¢ºèªãƒ»ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
   - ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   - Ollamaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»è¨­å®š
   - åˆæœŸLLMãƒ¢ãƒ‡ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
   - ã‚·ã‚¹ãƒ†ãƒ ã®èµ·å‹•
   - å‹•ä½œç¢ºèªãƒ†ã‚¹ãƒˆ
   - ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã®è‡ªå‹•ä¿®æ­£

##### æ–¹æ³•B: ãƒãƒ£ãƒƒãƒˆå‹LLMã‚µãƒ¼ãƒ“ã‚¹ï¼ˆæŒ‡ç¤ºãƒ™ãƒ¼ã‚¹ï¼‰

1. **ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³**
   ```bash
   git clone https://github.com/kenoogl/RIIT-RAG2.git
   cd RIIT-RAG2
   ```

2. **LLMã‚µãƒ¼ãƒ“ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹**
   - ChatGPTã€Claudeã€Geminiç­‰ã®Webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹
   - ã¾ãŸã¯ãƒ­ãƒ¼ã‚«ãƒ«Ollamaã€LM Studioç­‰

3. **æ®µéšçš„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æŒ‡ç¤º**
   
   **ã‚¹ãƒ†ãƒƒãƒ—1: ç’°å¢ƒç¢ºèª**
   ```
   ç„ç•ŒRAGã‚·ã‚¹ãƒ†ãƒ ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’é–‹å§‹ã—ã¾ã™ã€‚
   ã¾ãšã€ç§ã®ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒï¼ˆOSã€Pythonã€Gitï¼‰ã‚’ç¢ºèªã—ã¦ã€
   å¿…è¦ãªå‰ææ¡ä»¶ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚
   ```

   **ã‚¹ãƒ†ãƒƒãƒ—2: ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
   ```
   Pythonä»®æƒ³ç’°å¢ƒã‚’ä½œæˆã—ã€requirements.txtã‹ã‚‰
   ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æ‰‹é †ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚
   ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã®å¯¾å‡¦æ³•ã‚‚å«ã‚ã¦ãã ã•ã„ã€‚
   ```

   **ã‚¹ãƒ†ãƒƒãƒ—3: Ollamaã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
   ```
   Ollamaã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€ç„ç•ŒRAGã‚·ã‚¹ãƒ†ãƒ ã«å¿…è¦ãª
   LLMãƒ¢ãƒ‡ãƒ«ï¼ˆllama3.2:1bç­‰ï¼‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹
   æ‰‹é †ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚
   ```

   **ã‚¹ãƒ†ãƒƒãƒ—4: ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•**
   ```
   ç„ç•ŒRAGã‚·ã‚¹ãƒ†ãƒ ã‚’èµ·å‹•ã—ã€å‹•ä½œç¢ºèªã‚’è¡Œã†
   æ‰‹é †ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã®
   ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ–¹æ³•ã‚‚å«ã‚ã¦ãã ã•ã„ã€‚
   ```

4. **å„ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè¡Œ**
   LLMã®æŒ‡ç¤ºã«å¾“ã£ã¦å„ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯
   ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’LLMã«å ±å‘Šã—ã¦è§£æ±ºç­–ã‚’æ±‚ã‚ã‚‹

#### ã“ã®æ–¹æ³•ã®åˆ©ç‚¹

**æ–¹æ³•Aï¼ˆã‚³ãƒ¼ãƒ‰å®Ÿè¡Œæ©Ÿèƒ½ä»˜ãï¼‰ã®åˆ©ç‚¹**
- âœ… **å®Œå…¨è‡ªå‹•åŒ–**: æ‰‹å‹•ä½œæ¥­ãŒæœ€å°é™
- âœ… **ã‚¨ãƒ©ãƒ¼è‡ªå‹•ä¿®æ­£**: å•é¡ŒãŒç™ºç”Ÿã—ã¦ã‚‚è‡ªå‹•çš„ã«è§£æ±º
- âœ… **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å®Ÿè¡Œ**: ã‚³ãƒãƒ³ãƒ‰ã‚’ç›´æ¥å®Ÿè¡Œã—ã¦çµæœã‚’ç¢ºèª
- âœ… **ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ**: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç·¨é›†ã‚„ä½œæˆãŒå¯èƒ½
- âœ… **ç’°å¢ƒé©å¿œ**: ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒã‚’è‡ªå‹•æ¤œå‡ºã—ã¦æœ€é©åŒ–

**æ–¹æ³•Bï¼ˆãƒãƒ£ãƒƒãƒˆå‹ï¼‰ã®åˆ©ç‚¹**
- âœ… **å¹…åºƒã„å¯¾å¿œ**: å¤šãã®LLMã‚µãƒ¼ãƒ“ã‚¹ã§åˆ©ç”¨å¯èƒ½
- âœ… **æ®µéšçš„å­¦ç¿’**: å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’ç†è§£ã—ãªãŒã‚‰é€²è¡Œ
- âœ… **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯¾å¿œ**: ç‰¹å®šã®è¦ä»¶ã«æŸ”è»Ÿã«å¯¾å¿œ
- âœ… **ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®è©³ç´°ãªè§£æ±ºç­–
- âœ… **ç„¡æ–™åˆ©ç”¨**: å¤šãã®ã‚µãƒ¼ãƒ“ã‚¹ã§ç„¡æ–™ãƒ—ãƒ©ãƒ³ãŒåˆ©ç”¨å¯èƒ½

#### æ¨å¥¨LLMã‚µãƒ¼ãƒ“ã‚¹åˆ¥ã®ç‰¹å¾´

| ã‚µãƒ¼ãƒ“ã‚¹ | ã‚¿ã‚¤ãƒ— | è‡ªå‹•å®Ÿè¡Œ | ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ | æ¨å¥¨åº¦ | å‚™è€ƒ |
|----------|--------|----------|--------------|--------|------|
| **Kiro** | VSCodeçµ±åˆ | âœ… | âœ… | â­â­â­â­â­ | æœ€ã‚‚çµ±åˆçš„ |
| **Antigravity** | VSCodeçµ±åˆ | âœ… | âœ… | â­â­â­â­â­ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç†è§£ã«å„ªã‚Œã‚‹ |
| **Cursor** | AIçµ±åˆã‚¨ãƒ‡ã‚£ã‚¿ | âœ… | âœ… | â­â­â­â­â­ | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ”¯æ´ |
| **ChatGPT Plus** | Web + Code Interpreter | âœ… | éƒ¨åˆ†çš„ | â­â­â­â­ | é«˜ã„ç†è§£åŠ› |
| **Claude 4.5** | Web + Artifacts | âœ… | éƒ¨åˆ†çš„ | â­â­â­â­ | æœ€æ–°ãƒ¢ãƒ‡ãƒ«ã€ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«å„ªã‚Œã‚‹ |
| **ChatGPTï¼ˆGPT-5.2ï¼‰** | ãƒãƒ£ãƒƒãƒˆ | âŒ | âŒ | â­â­â­â­ | æœ€æ–°ãƒ¢ãƒ‡ãƒ«ã€é«˜ã„ç†è§£åŠ› |
| **Claude 4.5ï¼ˆç„¡æ–™ï¼‰** | ãƒãƒ£ãƒƒãƒˆ | âŒ | âŒ | â­â­â­ | æœ€æ–°ãƒ¢ãƒ‡ãƒ«ã€è©³ç´°ãªèª¬æ˜ |
| **Gemini 3** | ãƒãƒ£ãƒƒãƒˆ | âŒ | âŒ | â­â­â­ | æœ€æ–°ãƒ¢ãƒ‡ãƒ«ã€Googleçµ±åˆ |
| **Ollamaï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰** | ãƒ­ãƒ¼ã‚«ãƒ« | âŒ | âŒ | â­â­ | ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼é‡è¦– |

#### å¯¾å¿œç’°å¢ƒ

- **macOS**: Intel/Apple Siliconä¸¡å¯¾å¿œ
- **Linux**: Ubuntuã€CentOSã€RHELç­‰
- **Windows**: WSL2ç’°å¢ƒæ¨å¥¨

---

## ğŸ“‹ å¾“æ¥ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

LLMã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚’ä½¿ç”¨ã§ããªã„å ´åˆã‚„ã€æ‰‹å‹•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®è©³ç´°æ‰‹é †ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚

## ç›®æ¬¡

1. [ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶](#ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶)
2. [äº‹å‰æº–å‚™](#äº‹å‰æº–å‚™)
3. [Dockerã‚’ä½¿ç”¨ã—ãŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#dockerã‚’ä½¿ç”¨ã—ãŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
4. [ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
5. [è¨­å®š](#è¨­å®š)
6. [åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
7. [å‹•ä½œç¢ºèª](#å‹•ä½œç¢ºèª)
8. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

## ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

### ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢è¦ä»¶

| é …ç›® | æœ€å°æ§‹æˆ | æ¨å¥¨æ§‹æˆ | é«˜è² è·ç’°å¢ƒ |
|------|----------|----------|------------|
| CPU | 4ã‚³ã‚¢ | 8ã‚³ã‚¢ | 16ã‚³ã‚¢ä»¥ä¸Š |
| ãƒ¡ãƒ¢ãƒª | 8GB | 16GB | 32GBä»¥ä¸Š |
| ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | 20GB SSD | 100GB SSD | 500GB SSDä»¥ä¸Š |
| ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ | 10Mbps | 100Mbps | 1Gbpsä»¥ä¸Š |

### ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢è¦ä»¶

#### åŸºæœ¬è¦ä»¶
- **OS**: Ubuntu 20.04+ / CentOS 8+ / RHEL 8+
- **Python**: 3.11ä»¥ä¸Š
- **Git**: 2.25ä»¥ä¸Š

#### Dockerç’°å¢ƒï¼ˆæ¨å¥¨ï¼‰
- **Docker**: 20.10ä»¥ä¸Š
- **Docker Compose**: 2.0ä»¥ä¸Š

#### å¤–éƒ¨ä¾å­˜é–¢ä¿‚
- **Ollama**: LLMãƒ¢ãƒ‡ãƒ«å®Ÿè¡Œç’°å¢ƒ
- **Nginx**: ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

## äº‹å‰æº–å‚™

### 1. ã‚·ã‚¹ãƒ†ãƒ æ›´æ–°

#### Ubuntu/Debian
```bash
sudo apt update && sudo apt upgrade -y
sudo apt install -y curl wget git build-essential
```

#### CentOS/RHEL
```bash
sudo yum update -y
sudo yum groupinstall -y "Development Tools"
sudo yum install -y curl wget git
```

### 2. Python 3.11ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

#### Ubuntu 20.04/22.04
```bash
# Python 3.11ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install -y software-properties-common
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt update
sudo apt install -y python3.11 python3.11-venv python3.11-dev

# pipã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl -sS https://bootstrap.pypa.io/get-pip.py | python3.11
```

#### CentOS 8/RHEL 8
```bash
# Python 3.11ã®ãƒ“ãƒ«ãƒ‰ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo yum install -y gcc openssl-devel bzip2-devel libffi-devel zlib-devel
cd /tmp
wget https://www.python.org/ftp/python/3.11.7/Python-3.11.7.tgz
tar xzf Python-3.11.7.tgz
cd Python-3.11.7
./configure --enable-optimizations
make altinstall
sudo ln -sf /usr/local/bin/python3.11 /usr/bin/python3.11
```

### 3. Ollamaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Ollamaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl -fsSL https://ollama.ai/install.sh | sh

# ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹å§‹
sudo systemctl start ollama
sudo systemctl enable ollama

# å‹•ä½œç¢ºèª
ollama --version
```

## Dockerã‚’ä½¿ç”¨ã—ãŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### 1. Dockerã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

#### Ubuntu
```bash
# Dockerå…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã®è¿½åŠ 
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# Dockerã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’dockerã‚°ãƒ«ãƒ¼ãƒ—ã«è¿½åŠ 
sudo usermod -aG docker $USER
newgrp docker
```

#### CentOS/RHEL
```bash
# Dockerå…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã®è¿½åŠ 
sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

# Dockerã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo yum install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin

# ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹å§‹
sudo systemctl start docker
sudo systemctl enable docker

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’dockerã‚°ãƒ«ãƒ¼ãƒ—ã«è¿½åŠ 
sudo usermod -aG docker $USER
newgrp docker
```

### 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/your-org/genkai-rag-system.git
cd genkai-rag-system

# ãƒ–ãƒ©ãƒ³ãƒã®ç¢ºèªï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
git checkout main
```

### 3. ç’°å¢ƒè¨­å®š

```bash
# ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
cp .env.example .env

# ç’°å¢ƒå¤‰æ•°ã®ç·¨é›†
nano .env
```

#### .envãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®šä¾‹

```bash
# åŸºæœ¬è¨­å®š
GENKAI_HOST=0.0.0.0
GENKAI_PORT=8000
GENKAI_DEBUG=false

# Ollamaè¨­å®š
GENKAI_OLLAMA_URL=http://host.docker.internal:11434

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
GENKAI_CHROMA_PERSIST_DIR=./data/chroma_db

# ãƒ­ã‚°è¨­å®š
GENKAI_LOG_LEVEL=INFO
GENKAI_LOG_FILE=./logs/genkai_rag.log

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­å®š
GENKAI_MAX_CONCURRENT_REQUESTS=10
GENKAI_CONCURRENCY_MAX_REQUESTS=20

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
GENKAI_SECRET_KEY=your-secret-key-here-change-in-production
GENKAI_CORS_ORIGINS=*
```

### 4. Dockerã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•

```bash
# ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ“ãƒ«ãƒ‰ã¨èµ·å‹•
docker-compose up -d

# ãƒ­ã‚°ã®ç¢ºèª
docker-compose logs -f genkai-rag

# ã‚³ãƒ³ãƒ†ãƒŠã®çŠ¶æ…‹ç¢ºèª
docker-compose ps
```

### 5. LLMãƒ¢ãƒ‡ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

```bash
# æ¨å¥¨ãƒ¢ãƒ‡ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
ollama pull llama3.2:3b
ollama pull gemma2:2b
ollama pull llama3.2:1b

# ãƒ¢ãƒ‡ãƒ«ã®ç¢ºèª
ollama list
```

## ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### 1. è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæ¨å¥¨ï¼‰

```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œ
sudo ./scripts/install.sh

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†å¾Œã®ç¢ºèª
sudo systemctl status genkai-rag
```

### 2. æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ
sudo mkdir -p /opt/genkai-rag-system
sudo chown $USER:$USER /opt/genkai-rag-system

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¯ãƒ­ãƒ¼ãƒ³
cd /opt/genkai-rag-system
git clone https://github.com/your-org/genkai-rag-system.git .

# ä»®æƒ³ç’°å¢ƒã®ä½œæˆ
python3.11 -m venv venv
source venv/bin/activate

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install --upgrade pip
pip install -r requirements.txt
```

#### ã‚·ã‚¹ãƒ†ãƒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ

```bash
# ã‚·ã‚¹ãƒ†ãƒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ
sudo useradd --system --home /opt/genkai-rag-system --shell /bin/bash genkai-rag
sudo chown -R genkai-rag:genkai-rag /opt/genkai-rag-system
```

#### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®ä½œæˆ

```bash
# å¿…è¦ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ
sudo -u genkai-rag mkdir -p /opt/genkai-rag-system/{data,logs,config/backups}
sudo -u genkai-rag mkdir -p /opt/genkai-rag-system/data/{chroma_db,chat_history,index}

# æ¨©é™ã®è¨­å®š
sudo chmod 755 /opt/genkai-rag-system
sudo chmod 750 /opt/genkai-rag-system/{data,logs,config}
```

#### systemdã‚µãƒ¼ãƒ“ã‚¹ã®è¨­å®š

```bash
# ã‚µãƒ¼ãƒ“ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ”ãƒ¼
sudo cp scripts/genkai-rag.service /etc/systemd/system/

# ã‚µãƒ¼ãƒ“ã‚¹ã®æœ‰åŠ¹åŒ–
sudo systemctl daemon-reload
sudo systemctl enable genkai-rag
```

#### ç’°å¢ƒè¨­å®š

```bash
# ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
sudo -u genkai-rag cp .env.example /opt/genkai-rag-system/.env
sudo -u genkai-rag nano /opt/genkai-rag-system/.env
```

#### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®

```bash
# ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³è¨­å®šã®ã‚³ãƒ”ãƒ¼
sudo -u genkai-rag cp config/production.yaml /opt/genkai-rag-system/config/

# è¨­å®šã®ç·¨é›†
sudo -u genkai-rag nano /opt/genkai-rag-system/config/production.yaml
```

## è¨­å®š

### 1. åŸºæœ¬è¨­å®š

#### config/production.yaml ã®ä¸»è¦è¨­å®š

```yaml
# LLMãƒ¢ãƒ‡ãƒ«è¨­å®š
llm:
  default_model: "llama3.2:3b"
  ollama:
    base_url: "http://localhost:11434"
    timeout: 120

# APIè¨­å®š
api:
  host: "0.0.0.0"
  port: 8000
  cors_origins: "*"
  max_concurrent_requests: 10

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
vector_store:
  type: "chroma"
  persist_directory: "./data/chroma_db"
  collection_name: "genkai_documents"

# ç›£è¦–è¨­å®š
monitoring:
  log_level: "INFO"
  log_file: "./logs/genkai_rag.log"
  metrics_enabled: true
```

### 2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

#### ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®š

```bash
# UFW (Ubuntu)
sudo ufw allow 8000/tcp
sudo ufw allow ssh
sudo ufw enable

# firewalld (CentOS/RHEL)
sudo firewall-cmd --permanent --add-port=8000/tcp
sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --reload
```

#### SSL/TLSè¨­å®šï¼ˆNginxä½¿ç”¨ï¼‰

```bash
# Nginxã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install -y nginx  # Ubuntu
sudo yum install -y nginx  # CentOS

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
sudo nano /etc/nginx/sites-available/genkai-rag
```

```nginx
server {
    listen 80;
    server_name your-domain.com;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name your-domain.com;

    ssl_certificate /path/to/certificate.crt;
    ssl_certificate_key /path/to/private.key;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }
}
```

```bash
# è¨­å®šã®æœ‰åŠ¹åŒ–
sudo ln -s /etc/nginx/sites-available/genkai-rag /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

## åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ã‚·ã‚¹ãƒ†ãƒ ã®èµ·å‹•

#### Dockerç’°å¢ƒ
```bash
# ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•
docker-compose up -d

# èµ·å‹•ç¢ºèª
docker-compose ps
```

#### ãƒã‚¤ãƒ†ã‚£ãƒ–ç’°å¢ƒ
```bash
# ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•
sudo systemctl start genkai-rag

# èµ·å‹•ç¢ºèª
sudo systemctl status genkai-rag
```

### 2. åˆæœŸãƒ‡ãƒ¼ã‚¿ã®æº–å‚™

```bash
# æ–‡æ›¸ã®åˆæœŸå–å¾—ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
python main.py query "ç„ç•Œã‚·ã‚¹ãƒ†ãƒ ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„" --url https://www.cc.kyushu-u.ac.jp/scp/

# ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ç¢ºèª
curl http://localhost:8000/api/system/status
```

### 3. ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®è¨­å®šï¼ˆå°†æ¥ã®æ‹¡å¼µï¼‰

```bash
# ç¾åœ¨ã¯èªè¨¼æ©Ÿèƒ½ãªã—
# å°†æ¥çš„ã«èªè¨¼æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹å ´åˆã®æº–å‚™
echo "èªè¨¼æ©Ÿèƒ½ã¯å°†æ¥ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å®Ÿè£…äºˆå®š"
```

## å‹•ä½œç¢ºèª

### 1. åŸºæœ¬å‹•ä½œç¢ºèª

```bash
# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl http://localhost:8000/api/health

# è©³ç´°ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
curl http://localhost:8000/api/health/detailed

# åˆ©ç”¨å¯èƒ½ãƒ¢ãƒ‡ãƒ«ã®ç¢ºèª
curl http://localhost:8000/api/models
```

### 2. æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ

```bash
# è³ªå•å¿œç­”ãƒ†ã‚¹ãƒˆ
curl -X POST http://localhost:8000/api/query \
  -H "Content-Type: application/json" \
  -d '{
    "question": "ç„ç•Œã‚·ã‚¹ãƒ†ãƒ ã¨ã¯ä½•ã§ã™ã‹ï¼Ÿ",
    "session_id": "test-session",
    "max_sources": 3
  }'

# ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ã®ç¢ºèª
curl http://localhost:8000/api/system/status
```

### 3. Web UIã®ç¢ºèª

```bash
# ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹
# http://localhost:8000 ã¾ãŸã¯ https://your-domain.com
```

### 4. ãƒ­ã‚°ã®ç¢ºèª

```bash
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°
tail -f /opt/genkai-rag-system/logs/genkai_rag.log

# ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°ï¼ˆsystemdï¼‰
sudo journalctl -u genkai-rag -f

# Dockerãƒ­ã‚°
docker-compose logs -f genkai-rag
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### 1. ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­

**ã‚¨ãƒ©ãƒ¼**: `Address already in use`

**è§£æ±ºæ–¹æ³•**:
```bash
# ãƒãƒ¼ãƒˆä½¿ç”¨çŠ¶æ³ã®ç¢ºèª
sudo netstat -tlnp | grep :8000

# ãƒ—ãƒ­ã‚»ã‚¹ã®çµ‚äº†
sudo kill -9 <PID>

# ã¾ãŸã¯è¨­å®šã§ãƒãƒ¼ãƒˆã‚’å¤‰æ›´
export GENKAI_PORT=8001
```

#### 2. Ollamaã«æ¥ç¶šã§ããªã„

**ã‚¨ãƒ©ãƒ¼**: `Connection refused to Ollama`

**è§£æ±ºæ–¹æ³•**:
```bash
# Ollamaã®çŠ¶æ…‹ç¢ºèª
systemctl status ollama

# Ollamaã®å†èµ·å‹•
sudo systemctl restart ollama

# æ¥ç¶šãƒ†ã‚¹ãƒˆ
curl http://localhost:11434/api/tags

# Dockerç’°å¢ƒã®å ´åˆ
export GENKAI_OLLAMA_URL=http://host.docker.internal:11434
```

#### 3. æ¨©é™ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**: `Permission denied`

**è§£æ±ºæ–¹æ³•**:
```bash
# ãƒ•ã‚¡ã‚¤ãƒ«æ¨©é™ã®ä¿®æ­£
sudo chown -R genkai-rag:genkai-rag /opt/genkai-rag-system
sudo chmod -R 755 /opt/genkai-rag-system

# SELinuxã®ç¢ºèªï¼ˆCentOS/RHELï¼‰
sudo setsebool -P httpd_can_network_connect 1
```

#### 4. ãƒ¡ãƒ¢ãƒªä¸è¶³

**ã‚¨ãƒ©ãƒ¼**: `OutOfMemoryError`

**è§£æ±ºæ–¹æ³•**:
```bash
# ã‚¹ãƒ¯ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
sudo fallocate -l 4G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile

# è»½é‡ãƒ¢ãƒ‡ãƒ«ã¸ã®å¤‰æ›´
export GENKAI_DEFAULT_MODEL=llama3.2:1b
```

#### 5. ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**: `ModuleNotFoundError`

**è§£æ±ºæ–¹æ³•**:
```bash
# ä»®æƒ³ç’°å¢ƒã®ç¢ºèª
source /opt/genkai-rag-system/venv/bin/activate

# ä¾å­˜é–¢ä¿‚ã®å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install --force-reinstall -r requirements.txt

# Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ç¢ºèª
python --version  # 3.11ä»¥ä¸Šã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
```

#### 6. LlamaIndexã®ä¾å­˜é–¢ä¿‚ç«¶åˆ

**ã‚¨ãƒ©ãƒ¼**: `pip's dependency resolver does not currently take into account all the packages`

**è§£æ±ºæ–¹æ³•**:
```bash
# ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¼·åˆ¶ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install llama-index-llms-ollama==0.1.2 --force-reinstall

# ä¾å­˜é–¢ä¿‚ã®ç¢ºèª
pip check

# å¿…è¦ã«å¿œã˜ã¦ä»®æƒ³ç’°å¢ƒã‚’å†ä½œæˆ
rm -rf venv
python3.12 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

#### 7. OpenAI APIã‚­ãƒ¼ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**: `No API key found for OpenAI`

**è§£æ±ºæ–¹æ³•**:
```bash
# ã“ã‚Œã¯æ­£å¸¸ãªå‹•ä½œã§ã™ã€‚ã‚·ã‚¹ãƒ†ãƒ ã¯Ollamaã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€OpenAIã‚­ãƒ¼ã¯ä¸è¦
# ãƒ­ã‚°ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚¨ãƒ©ãƒ¼ã¯ç„¡è¦–ã—ã¦æ§‹ã„ã¾ã›ã‚“

# ç¢ºèªæ–¹æ³•ï¼š
curl http://localhost:8000/api/models
# åˆ©ç”¨å¯èƒ½ãªOllamaãƒ¢ãƒ‡ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æ­£å¸¸
```

#### 8. asyncioã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**: `asyncio.run() cannot be called from a running event loop`

**è§£æ±ºæ–¹æ³•**:
```bash
# main.pyã‚’ä½¿ç”¨ã—ã¦ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
python main.py server --port 8000

# ã¾ãŸã¯ç›´æ¥uvicornã‚’ä½¿ç”¨
uvicorn genkai_rag.api.app:app --host 0.0.0.0 --port 8000
```

## macOSç‰¹æœ‰ã®æ³¨æ„äº‹é …

### 1. ç’°å¢ƒæº–å‚™

#### Homebrewã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰
```bash
# Homebrewã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# ãƒ‘ã‚¹ã®è¨­å®š
echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> ~/.zprofile
eval "$(/opt/homebrew/bin/brew shellenv)"
```

#### Python 3.12ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# Homebrewã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰
brew install python@3.12

# ãƒ‘ã‚¹ã®ç¢ºèª
which python3.12
python3.12 --version
```

#### Ollamaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# Homebrewã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰
brew install ollama

# ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹å§‹
brew services start ollama

# å‹•ä½œç¢ºèª
ollama --version
ollama list
```

### 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

#### å¿…è¦ãªã‚·ã‚¹ãƒ†ãƒ ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
```bash
# Xcodeã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«
xcode-select --install

# è¿½åŠ ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
brew install pkg-config libffi openssl
```

#### Pythonä»®æƒ³ç’°å¢ƒã®ä½œæˆ
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd /path/to/genkai-rag-system

# ä»®æƒ³ç’°å¢ƒã®ä½œæˆ
python3.12 -m venv venv

# ä»®æƒ³ç’°å¢ƒã®æœ‰åŠ¹åŒ–
source venv/bin/activate

# pipã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
pip install --upgrade pip

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt
```

### 3. åˆå›èµ·å‹•æ™‚ã®æ³¨æ„ç‚¹

#### ãƒ¢ãƒ‡ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
```bash
# è»½é‡ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰é–‹å§‹ï¼ˆæ¨å¥¨ï¼‰
ollama pull llama3.2:1b

# ãƒ¢ãƒ‡ãƒ«ã®ç¢ºèª
ollama list
```

#### ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
```bash
# main.pyã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰
python main.py server --port 8000

# ã¾ãŸã¯ç›´æ¥uvicornã‚’ä½¿ç”¨
uvicorn genkai_rag.api.app:app --host 0.0.0.0 --port 8000
```

### 4. å‹•ä½œç¢ºèªæ‰‹é †

#### 1. åŸºæœ¬çš„ãªãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
```bash
# ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã™ã‚‹ã¾ã§å¾…æ©Ÿï¼ˆç´„15-30ç§’ï¼‰
sleep 15

# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl http://localhost:8000/api/health
```

#### 2. ãƒ¢ãƒ‡ãƒ«ç®¡ç†ã®ç¢ºèª
```bash
# åˆ©ç”¨å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«ä¸€è¦§
curl http://localhost:8000/api/models

# ãƒ¢ãƒ‡ãƒ«ã®åˆ‡ã‚Šæ›¿ãˆ
curl -X POST http://localhost:8000/api/models/switch \
  -H "Content-Type: application/json" \
  -d '{"model_name": "llama3.2:1b"}'

# ç¾åœ¨ã®ãƒ¢ãƒ‡ãƒ«ç¢ºèª
curl http://localhost:8000/api/models/current
```

#### 3. ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ã®ç¢ºèª
```bash
# ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹
curl http://localhost:8000/api/system/status
```

#### 4. è³ªå•å¿œç­”ã®ãƒ†ã‚¹ãƒˆ
```bash
# ç°¡å˜ãªè³ªå•ã§ãƒ†ã‚¹ãƒˆ
curl -X POST http://localhost:8000/api/query \
  -H "Content-Type: application/json" \
  -d '{
    "question": "ç„ç•Œã‚·ã‚¹ãƒ†ãƒ ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„",
    "session_id": "test-session-001",
    "include_history": false,
    "max_sources": 3
  }'
```

### 5. macOSç‰¹æœ‰ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®ç›£è¦–
```bash
# ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®ç¢ºèª
top -l 1 | grep "PhysMem"

# ãƒ—ãƒ­ã‚»ã‚¹åˆ¥ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
ps aux | grep python | head -10
```

#### ãƒãƒ¼ãƒˆç«¶åˆã®è§£æ±º
```bash
# ãƒãƒ¼ãƒˆä½¿ç”¨çŠ¶æ³ã®ç¢ºèªï¼ˆmacOSï¼‰
lsof -i :8000

# ãƒ—ãƒ­ã‚»ã‚¹ã®çµ‚äº†
kill -9 <PID>

# åˆ¥ã®ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨
python main.py server --port 8001
```

#### Homebrewã‚µãƒ¼ãƒ“ã‚¹ã®ç®¡ç†
```bash
# Ollamaã‚µãƒ¼ãƒ“ã‚¹ã®çŠ¶æ…‹ç¢ºèª
brew services list | grep ollama

# ã‚µãƒ¼ãƒ“ã‚¹ã®å†èµ·å‹•
brew services restart ollama

# ã‚µãƒ¼ãƒ“ã‚¹ã®åœæ­¢
brew services stop ollama
```

### 6. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### Apple Siliconã§ã®æœ€é©åŒ–
```bash
# Apple Siliconï¼ˆM1/M2ï¼‰ã®å ´åˆ
export PYTORCH_ENABLE_MPS_FALLBACK=1

# ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®åˆ¶é™
export GENKAI_MAX_CONCURRENT_REQUESTS=5
```

#### ãƒ¡ãƒ¢ãƒªä¸è¶³æ™‚ã®å¯¾å‡¦
```bash
# è»½é‡ãƒ¢ãƒ‡ãƒ«ã®ä½¿ç”¨
ollama pull llama3.2:1b

# ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã§ã®åˆ¶é™
export GENKAI_CHUNK_SIZE=500
export GENKAI_MAX_SOURCES=3
```

### 7. é–‹ç™ºç’°å¢ƒã§ã®æ³¨æ„ç‚¹

#### ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã®èª¿æ•´
```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§ã®èµ·å‹•
python main.py server --log-level DEBUG --port 8000
```

#### è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰ã®æœ‰åŠ¹åŒ–
```bash
# é–‹ç™ºæ™‚ã®è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰
uvicorn genkai_rag.api.app:app --host 0.0.0.0 --port 8000 --reload
```

### 8. æœ¬ç•ªç’°å¢ƒã¸ã®ç§»è¡Œ

#### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®èª¿æ•´
```bash
# æœ¬ç•ªç”¨è¨­å®šã®ä½œæˆ
cp config/default.yaml config/production.yaml

# è¨­å®šã®ç·¨é›†
nano config/production.yaml
```

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
```bash
# ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®šï¼ˆmacOSï¼‰
sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on
sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setallowsigned on
```

ã“ã®æ‰‹é †ã«å¾“ã†ã“ã¨ã§ã€macOSç’°å¢ƒã§ã‚‚ç„ç•ŒRAGã‚·ã‚¹ãƒ†ãƒ ã‚’ç¢ºå®Ÿã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»é‹ç”¨ã§ãã¾ã™ã€‚

### ãƒ­ã‚°åˆ†æ

#### ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ç¢ºèª

```bash
# ã‚¨ãƒ©ãƒ¼ã®æŠ½å‡º
grep -i error /opt/genkai-rag-system/logs/genkai_rag.log | tail -20

# è­¦å‘Šã®ç¢ºèª
grep -i warning /opt/genkai-rag-system/logs/genkai_rag.log | tail -10

# ç‰¹å®šæ™‚é–“ã®ãƒ­ã‚°
grep "2024-01-15 10:" /opt/genkai-rag-system/logs/genkai_rag.log
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ

#### ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ã®ç¢ºèª

```bash
# CPUä½¿ç”¨ç‡
top -p $(pgrep -f genkai-rag)

# ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
ps aux | grep genkai-rag

# ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡
df -h /opt/genkai-rag-system

# ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶š
ss -tlnp | grep :8000
```

## ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰

### 1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ä½œæˆ

```bash
# ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
sudo -u genkai-rag tar -czf /tmp/genkai-rag-backup-$(date +%Y%m%d).tar.gz \
  -C /opt/genkai-rag-system data/ config/ logs/
```

### 2. ã‚·ã‚¹ãƒ†ãƒ ã®æ›´æ–°

```bash
# ã‚·ã‚¹ãƒ†ãƒ åœæ­¢
sudo systemctl stop genkai-rag

# ã‚³ãƒ¼ãƒ‰ã®æ›´æ–°
cd /opt/genkai-rag-system
sudo -u genkai-rag git pull origin main

# ä¾å­˜é–¢ä¿‚ã®æ›´æ–°
sudo -u genkai-rag /opt/genkai-rag-system/venv/bin/pip install -r requirements.txt

# ã‚·ã‚¹ãƒ†ãƒ å†èµ·å‹•
sudo systemctl start genkai-rag
```

### 3. å‹•ä½œç¢ºèª

```bash
# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl http://localhost:8000/api/health

# ãƒ­ã‚°ã®ç¢ºèª
sudo journalctl -u genkai-rag -f
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–

### 1. ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®š

```bash
# å¿…è¦æœ€å°é™ã®ãƒãƒ¼ãƒˆã®ã¿é–‹æ”¾
sudo ufw --force reset
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow ssh
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable
```

### 2. å®šæœŸæ›´æ–°ã®è¨­å®š

```bash
# è‡ªå‹•ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ›´æ–°ã®æœ‰åŠ¹åŒ–ï¼ˆUbuntuï¼‰
sudo apt install -y unattended-upgrades
sudo dpkg-reconfigure -plow unattended-upgrades
```

### 3. ãƒ­ã‚°ç›£è¦–ã®è¨­å®š

```bash
# fail2banã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install -y fail2ban

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
sudo nano /etc/fail2ban/jail.local
```

```ini
[DEFAULT]
bantime = 3600
findtime = 600
maxretry = 5

[nginx-http-auth]
enabled = true
port = http,https
logpath = /var/log/nginx/error.log
```

ã“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰ã«å¾“ã£ã¦ã€ç„ç•ŒRAGã‚·ã‚¹ãƒ†ãƒ ã‚’å®‰å…¨ã‹ã¤ç¢ºå®Ÿã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§ã™ã‚‹ã‹ã€é–‹ç™ºãƒãƒ¼ãƒ ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚