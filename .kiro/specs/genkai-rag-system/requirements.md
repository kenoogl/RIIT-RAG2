# 要件定義書

## 概要

九州大学情報基盤研究開発センターのスーパーコンピュータ玄界システムについて、利用者からの質問に対して自動的に回答を提供するRAGシステムをLlamaIndexを使って構築する。システム説明、運用ポリシー、接続方法、バッチスクリプトの書き方、バッチキューの説明、アカウントの作り方、使用料金説明、設定方法などの情報を提供し、簡単に使えるWebインターフェイスも含む。

## 用語集

- **RAGシステム**: Retrieval-Augmented Generation システム。文書検索と生成AIを組み合わせた質問応答システム
- **玄界システム**: 九州大学情報基盤研究開発センターのスーパーコンピュータシステム
- **LlamaIndex**: RAGシステム構築のためのPythonライブラリ
- **文書インデックス**: 検索可能な形式で構造化された文書データ
- **Webインターフェイス**: ユーザーが質問を入力し回答を受け取るためのWeb UI
- **データソース**: https://www.cc.kyushu-u.ac.jp/scp/ の日本語版コンテンツ

## 要件

### 要件 1: 文書データの取得と処理

**ユーザーストーリー:** システム管理者として、玄界システムの公式文書を自動的に取得・処理したい。これにより、最新の情報に基づいた質問応答が可能になる。

#### 受け入れ基準

1. システムが指定されたURL（https://www.cc.kyushu-u.ac.jp/scp/）から日本語版の文書を取得する時、システムはWebスクレイピングによって文書コンテンツを抽出する
2. 取得した文書データを処理する時、システムは適切なチャンクサイズに分割してインデックス化する
3. 文書が更新された時、システムは既存のインデックスを更新して最新情報を反映する
4. 文書処理中にエラーが発生した時、システムはエラーログを記録し、処理を継続する

### 要件 2: RAGシステムの構築

**ユーザーストーリー:** 利用者として、玄界システムに関する質問を自然言語で入力し、適切な回答を得たい。これにより、マニュアルを読む時間を短縮できる。

#### 受け入れ基準

1. LlamaIndexを使用してRAGシステムを構築する時、システムは文書インデックスと生成モデルを統合する
2. 利用者が質問を入力した時、システムは関連する文書セクションを検索し、コンテキストとして使用する
3. 検索結果に基づいて回答を生成する時、システムは日本語で自然な回答を提供する
4. 回答に関連する元文書の参照情報を含める時、システムは出典URLやセクション名を明示する

### 要件 3: Webインターフェイスの提供

**ユーザーストーリー:** 利用者として、ブラウザから簡単に質問を入力し、回答を確認したい。これにより、コマンドラインツールを使わずに済む。

#### 受け入れ基準

1. Webブラウザでアクセスした時、システムは質問入力フォームを表示する
2. 質問を送信した時、システムは処理中であることを視覚的に示す
3. 回答が生成された時、システムは読みやすい形式で回答と出典情報を表示する
4. 複数の質問を連続して行う時、システムは会話履歴を保持する

### 要件 4: システム運用とメンテナンス

**ユーザーストーリー:** システム管理者として、オンプレミス環境でシステムを安定運用したい。これにより、外部サービスに依存せずに済む。

#### 受け入れ基準

1. オンプレミス環境にデプロイする時、システムは必要な依存関係を含む実行可能な形式で提供される
2. 文書が継続的に更新される時、システは定期的または手動でインデックスを更新する機能を提供する
3. システムログを確認する時、システムは運用状況とエラー情報を適切に記録する
4. システムリソースを監視する時、システムはメモリ使用量とディスク使用量を効率的に管理する

### 要件 5: 質問応答の品質

**ユーザーストーリー:** 利用者として、システム説明、運用ポリシー、接続方法、バッチスクリプトの書き方、バッチキューの説明、アカウントの作り方、使用料金説明、設定方法について正確な情報を得たい。

#### 受け入れ基準

1. システム説明に関する質問をした時、システムは玄界システムの概要と仕様を正確に回答する
2. 運用ポリシーについて質問した時、システムは利用規約と制限事項を明確に説明する
3. 接続方法について質問した時、システムはSSH接続手順とネットワーク設定を詳細に説明する
4. バッチスクリプトの書き方について質問した時、システムは具体的なスクリプト例とパラメータ説明を提供する
5. バッチキューについて質問した時、システムはキューの種類と使い分けを説明する
6. アカウント作成について質問した時、システムは申請手順と必要書類を案内する
7. 使用料金について質問した時、システムは課金体系と計算方法を説明する
8. 設定方法について質問した時、システムは環境設定とモジュール読み込み手順を説明する

### 要件 6: パフォーマンスと可用性

**ユーザーストーリー:** 利用者として、質問に対して迅速に回答を得たい。これにより、作業効率を向上させることができる。

#### 受け入れ基準

1. 質問を送信した時、システムは30秒以内に回答を生成する
2. 複数の利用者が同時にアクセスした時、システムは適切に負荷を処理する
3. システムが長時間稼働している時、システムはメモリリークなしに安定動作する
4. インデックス更新中でも、システムは既存のインデックスを使用して質問応答を継続する